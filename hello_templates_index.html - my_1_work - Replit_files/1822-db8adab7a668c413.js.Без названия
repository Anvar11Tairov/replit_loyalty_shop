"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1822],{74591:function(e,n,t){var r=t(35944),i=(t(67294),t(69346)),l=t(1144),a=t(81255),o=t(15085),c=t(57704);n.Z=function(e){return(0,r.BX)(i.Z,{css:[a.l0.colWithGap(24)],children:[(0,r.BX)(l.h,{variant:"headerDefault",level:2,children:["Delete ",e.name||e.entityType,"?"]}),(0,r.BX)(l.x,{multiline:!0,children:["Are you sure you want to delete"," ",e.description?e.description:"this ".concat(e.entityType),"? This cannot be undone."]}),(0,r.BX)(i.Z,{css:[a.l0.rowWithGap(12),a.l0.justify.end],children:[(0,r.tZ)(o.zx,{text:"Cancel",onClick:e.hideModal}),(0,r.tZ)(o.zx,{dataCy:"delete-modal-confirm-button",iconLeft:(0,r.tZ)(c.Z,{}),onClick:function(){e.delete(),e.hideModal()},text:"Yes, delete ".concat(e.confirmDescription?e.confirmDescription:"this ".concat(e.entityType)),colorway:"negative"})]})]})}},60368:function(e,n,t){var r=t(35944),i=t(87603),l=t.n(i);t(67294);n.Z=function(e){var n=e.maxLength,t=void 0===n?140:n,i=e.value,a=void 0===i?"":i,o=e.hideLabel,c=void 0!==o&&o;return(0,r.BX)("div",{className:"jsx-59d2089b8a0ab881",children:[a.length," / ",t," ",c?"":"characters",(0,r.tZ)(l(),{id:"59d2089b8a0ab881",children:"div.jsx-59d2089b8a0ab881{color:var(--foreground-dimmer);font-size:.75em;text-align:right;margin-top:var(--space-8)}"})]})}},80658:function(e,n,t){t.d(n,{Z:function(){return T}});var r=t(26042),i=t(69396),l=t(10253),a=t(35944),o=t(67294),c=t(92876),u=t(30992),s=t(15085),d=t(98967),p=t(83074),h=t(58086),v=t(37424),f=t(60368),m=t(14455),g=t(9836),Z=t(30168),y=t(94412),b=t(7297),x=t(31230),R=t(97212),w=t(37887);function k(){var e=(0,b.Z)(["\n  query ForkModal {\n    currentUser {\n      id\n      url\n      image\n      username\n      ...ReplOwnerCurrentUser\n      teams {\n        id\n        ...ReplOwnerTeam\n      }\n    }\n  }\n  ","\n  ","\n"]);return k=function(){return e},e}var B={},_=(0,x.Ps)(k(),R.s,R.a);var E=t(99383),P=function(e){var n=e.onFork,t=e.hideModal,r=e.initialTitle,i=e.initialDescription,c=void 0===i?"":i,d=e.initialPrivacy,b=e.teamContext,x=e.currentUser,R=e.template,w=o.useRef(null),k=(0,v.H)(),B=(0,l.Z)((0,g.Y)(x,b),2),_=B[0],P=B[1],T=(0,l.Z)((0,E.c)(_,x,d||!1),3),C=T[0],G=T[1],U=T[2],X=(0,u.Y)(r,(function(e){if(e)return e.length>60?{message:"Must be no longer than 60 characters"}:/[0-9a-zA-Z]/.test(e)?void 0:{message:"Title must contain at least one alphanumeric character"}})),I=(0,u.Y)(c,(function(e){if(e&&e.length>h.p)return{message:"Must be no longer than ".concat(h.p," characters")}}));o.useEffect((function(){w.current&&w.current.focus()}),[w]);var S="Team"===_.__typename?_.id:null;return(0,a.tZ)("form",{onSubmit:function(e){e.preventDefault(),X.validate()||I.validate()||(n(S,X.value,I.value,C),t())},children:(0,a.BX)(s.G7,{css:[s.l0.colWithGap(16)],children:[(0,a.tZ)(s.h4,{variant:"headerDefault",level:2,children:R?"Use Template":"Fork Repl"}),(0,a.BX)(s.G7,{css:[s.l0.colWithGap(16)],children:[(0,a.BX)(s.G7,{css:[s.l0.colWithGap(4)],children:[(0,a.BX)(s.G7,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.align.end],children:[(0,a.tZ)(m._,{for:k("name"),children:"Name"}),(0,a.tZ)(f.Z,{maxLength:60,value:X.value,hideLabel:!0})]}),(0,a.tZ)(s.II,{ref:w,className:"repl-title-input",placeholder:"Name your Repl",onChange:function(e){return X.setValue(e.target.value)},onFocus:function(e){return e.target.select()},value:X.value,onBlur:X.handleBlur,id:k("name")}),X.error?(0,a.tZ)(s.xv,{css:[s.l0.color.accentNegativeStronger],children:X.error.message}):null]}),(0,a.BX)(s.G7,{css:[s.l0.colWithGap(4)],children:[(0,a.BX)(s.G7,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.align.end],children:[(0,a.tZ)(m._,{for:k("description"),children:"Description"}),(0,a.tZ)(f.Z,{maxLength:h.p,value:I.value,hideLabel:!0})]}),(0,a.tZ)(s.B,{maxLength:h.p,value:I.value,onChange:function(e){return I.setValue(e.target.value)},placeholder:"What does this Repl do?",css:[s.l0.minHeight(96),s.l0.maxHeight(128),{resize:"vertical"}],id:k("description")})]}),(0,a.tZ)(y.P,{context:"fork_modal",isPrivate:C,setIsPrivate:G,privacyState:U})]}),x.teams.length>0?(0,a.BX)(s.G7,{css:[s.l0.colWithGap(8)],children:[(0,a.tZ)(m._,{for:k("owner"),children:"Owner"}),(0,a.tZ)(Z.Z,{id:k("owner"),currentUser:x,initialSelectedUsername:_.username,onChange:function(e){return P(e.username)}})]}):null,(0,a.BX)(s.G7,{css:[s.l0.rowWithGap(12),s.l0.justify.end],children:[(0,a.tZ)(s.zx,{onClick:t,text:"Cancel",type:"button"}),(0,a.tZ)(s.zx,{colorway:"primary",type:"submit",disabled:Boolean(X.error||I.error),text:R?(0,a.tZ)(a.HY,{children:"Use Template"}):(0,a.tZ)(a.HY,{children:"Fork Repl"}),iconLeft:(0,a.tZ)(p.Z,{})})]})]})})};function T(e){var n=function(e){var n=(0,r.Z)({},B,e);return w.a(_,n)}({fetchPolicy:"cache-and-network",onError:function(e){c.$e((function(n){n.setTag("fork-modal",!0),c.Tb(e)}))}}),t=n.data,l=n.loading,o=n.error;if(l)return(0,a.tZ)(s.xv,{color:"dimmer",children:"Loading..."});if(o)return(0,a.tZ)(s.xv,{children:"Something went wrong."});if(!t)return null;var u=t.currentUser;return u?(0,a.tZ)(P,(0,i.Z)((0,r.Z)({},e),{currentUser:u})):(0,a.tZ)(d.Z,{title:"Sign up or log in to fork this Repl",onSuccess:function(){},source:"fork"})}},59292:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(26042),i=t(69396),l=t(10253),a=t(67294),o=t(11163),c=t(93058),u=t(7297),s=t(31230),d=t(50319);function p(){var e=(0,u.Z)(["\n  mutation ForkReplCreateRepl($input: CreateReplInput!) {\n    createRepl(input: $input) {\n      ... on Repl {\n        id\n        url\n        isPrivate\n        language\n        origin {\n          id\n          isOwner\n        }\n        source {\n          release {\n            id\n            repl {\n              id\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var h={},v=(0,s.Ps)(p());function f(e){var n=(0,r.Z)({},h,e);return d.D(v,n)}var m=t(33400),g=t(60977),Z=t(15935);function y(){var e,n,t,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=u.onFork,d=u.onError,p=(0,o.useRouter)(),h=(0,c.Z)().showError,v=(0,m.Z)(),y=(0,l.Z)(f({onCompleted:function(e){var n="Repl"===(null===e||void 0===e?void 0:e.createRepl.__typename)?e.createRepl:null;if(n)if(s&&s(e),"/replEnvironment2"!==p.pathname&&"/replEnvironmentMobile"!==p.pathname)p.push({pathname:v,query:{replUrl:n.url}},{pathname:n.url});else{var t=n.url+(p.query.lite?"?lite=".concat(p.query.lite.toString()):"");window.location.href=t}}}),2),b=y[0],x=y[1],R="UserError"===(null===(e=x.data)||void 0===e?void 0:e.createRepl.__typename)?null===(n=x.data)||void 0===n?void 0:n.createRepl.message:null===(t=x.error)||void 0===t?void 0:t.message;a.useEffect((function(){R&&(h(R),d&&d())}),[R,h,d]);var w=a.useCallback((function(e){var n=e.originId,t=e.replReleaseId,l=e.teamId,a=e.title,o=e.description,c=e.isPrivate,u=e.trackingData,s=e.forkToPersonal;b({variables:{input:{originId:n,replReleaseId:t,teamId:l,title:a,isPrivate:c,description:o,forkToPersonal:s,gitRemoteUrl:""}}}).then((function(e){var l,a,o,c,s,d,p,h="Repl"===(null===(l=e.data)||void 0===l?void 0:l.createRepl.__typename)?e.data.createRepl:null;h&&(0,g.j)(g.U3.REPL_CREATED,(0,i.Z)((0,r.Z)({isSignup:!1,isOnboarding:!1},u),{isForked:!0,isPrivate:h.isPrivate,replId:h.id,isRenamed:!1,language:h.language,isSelfForked:!!(null===(a=h.origin)||void 0===a?void 0:a.isOwner),isTemplateFork:Boolean(t),originId:n,templateReplId:(null===(o=h.source)||void 0===o||null===(c=o.release)||void 0===c||null===(s=c.repl)||void 0===s?void 0:s.id)||void 0,templateType:(null===(d=h.source)||void 0===d||null===(p=d.release)||void 0===p?void 0:p.repl)?(0,Z.lw)(h.source.release.repl):void 0}))}))}),[b]),k=!!(x.loading||x.data&&"Repl"===x.data.createRepl.__typename);return[w,{loading:k}]}},18332:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(10253),i=t(29815),l=t(67294),a=t(24351),o=t(26042),c=t(69396),u=function(e){return/\s/.test(e)};function s(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=(0,r.Z)(l.useState(null),2),a=i[0],s=i[1],d=l.useCallback(s,[s]),p=l.useRef(n);l.useEffect((function(){p.current=n}),[n]);var h=(0,r.Z)(l.useState(null),2),v=h[0],f=h[1];return l.useEffect((function(){if(a){var e=function(){var e=a.value,n=a.selectionStart;if(n){var t=1===n||u(e[n-2]||""),r=e.length?e[n-1]:null;f((function(i){if(i&&(n<i.index||0===n))return null;if(!r)return i;if(!i&&!t)return i;var l=p.current.includes(r);return i||l?i?u(r)?null:(0,c.Z)((0,o.Z)({},i),{text:e.slice(i.index,n)}):{index:n,text:"",match:r}:i}))}else f(null)},n=function(){f(null)};return a.addEventListener("focus",e),a.addEventListener("keyup",e),a.addEventListener("blur",n),function(){f(null),a.removeEventListener("focus",e),a.removeEventListener("keyup",e),a.removeEventListener("blur",n)}}}),[a,f]),[v,d]}function d(e){var n=l.useRef(e);l.useEffect((function(){n.current=e}),[e]);var t=(0,r.Z)(l.useState(!1),2),o=t[0],c=t[1],u=(0,r.Z)(l.useState(null),2),d=u[0],p=u[1],h=(0,r.Z)(s.apply(void 0,(0,i.Z)(Object.keys(e))),2),v=h[0],f=h[1],m=l.useRef(v);l.useEffect((function(){m.current=v}),[v]);var g=(0,a.Z)(v,100);return l.useEffect((function(){if(g){var e=g.match,t=g.text,r=n.current[e]?n.current[e]:null;if(r){var i=!1;return c(!0),r(t).then((function(e){i||m.current===g&&(c(!1),p({textTrigger:g,results:e,applySuggestion:function(e){var n=e.targetValue,t=e.suggestionValue,r=n.slice(0,g.index),i=t,l=n.slice(g.index+g.text.length);l&&l.startsWith(" ")||(i+=" ");var a=r+i+l;return{cursorIndex:(r+i).length+(l&&l.startsWith(" ")?1:0),fullValue:a}}}))})),function(){i=!0}}p(null)}else p(null)}),[g,p]),[{isLoading:o,suggestions:d},f]}},6600:function(e,n,t){t.d(n,{Z:function(){return k}});var r=t(47568),i=t(70655),l=t(35944),a=t(67294),o=t(15085),c=t(37424),u=t(1144),s=t(93160),d=t(69346),p=t(81255),h=t(33773);function v(){var e=(0,a.useState)(!1),n=e[0],t=e[1];return(0,l.BX)(s.Z,{background:n?"higher":"default",css:[p.l0.borderRadius(8),p.l0.colWithGap(16),p.l0.p(8)],children:[(0,l.BX)(d.Z,{css:[p.l0.colWithGap(8)],children:[(0,l.BX)(d.Z,{onClick:function(){return t(!n)},css:[p.l0.rowWithGap(8),{cursor:"pointer"}],children:[(0,l.tZ)(u.x,{children:"Style your post with Markdown"}),(0,l.tZ)(h.Z,{rotate:n?0:270})]}),n?(0,l.tZ)(u.x,{color:"dimmer",multiline:!0,children:"You can style your post with a limited set of Markdown. Here are some supported content types:"}):null]}),n?(0,l.BX)(l.HY,{children:[(0,l.BX)(d.Z,{css:[p.l0.colWithGap(8)],children:[(0,l.tZ)(u.x,{children:"Bold Text"}),(0,l.tZ)(u.x,{color:"dimmer",children:"**bold**"})]}),(0,l.BX)(d.Z,{css:[p.l0.colWithGap(8)],children:[(0,l.tZ)(u.x,{children:"Italic Text"}),(0,l.tZ)(u.x,{color:"dimmer",children:"__italic__"})]}),(0,l.BX)(d.Z,{css:[p.l0.colWithGap(8)],children:[(0,l.tZ)(u.x,{children:"Links"}),(0,l.tZ)(u.x,{color:"dimmer",children:"[Link Name](https://yourlink.com)"})]}),(0,l.BX)(d.Z,{css:[p.l0.colWithGap(8)],children:[(0,l.tZ)(u.x,{children:"Images"}),(0,l.tZ)(u.x,{color:"dimmer",children:"![Image alt text](https://linktoyourimage.com)"})]}),(0,l.BX)(d.Z,{css:[p.l0.colWithGap(8)],children:[(0,l.tZ)(u.x,{children:"Code Blocks"}),(0,l.BX)(u.x,{color:"dimmer",children:["```",(0,l.tZ)("br",{}),"this is for large, multiline code blocks",(0,l.tZ)("br",{}),"```"]})]}),(0,l.BX)(d.Z,{css:[p.l0.colWithGap(8)],children:[(0,l.tZ)(u.x,{children:"Inline Code"}),(0,l.tZ)(u.x,{color:"dimmer",children:"`this is for code in the middle of sentences`"})]})]}):null]})}var f=t(90317),m=t(30992),g=t(88961),Z=t(19244),y=t(60977),b=t(75026),x=o.KD.form;function R(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>100?{message:"The title should not be longer than ".concat(100," characters.")}:void 0}function w(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>5e3?{message:"The description should not be longer than ".concat(5e3," characters.")}:void 0}function k(e){var n,t,a=e.repl,u=e.source,s=e.onDone,d=(0,c.H)(),p=d("titleIdInput"),h=d("descriptionIdInput"),k=(0,m.Y)("",R),B=(0,m.Y)("",w),_=(0,Z.O)();return(0,l.BX)(x,{onSubmit:function(){var e=(0,r.Z)((function(e){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return e.preventDefault(),k.validate()||B.validate()?[2]:[4,_.publish({input:{replId:a.id,title:k.value,body:B.value}})];case 1:return n.sent().error||((0,y.j)(y.U3.UPDATE_SHARED,{source:u,replType:a.publishedAs===f.O2.Template?"template_repl":"regular_repl"}),s()),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),css:[o.l0.colWithGap(16)],children:[(0,l.tZ)(o.h4,{level:2,variant:"subheadBig",children:"Add an update"}),(0,l.BX)(o.xv,{children:["Explain what has changed about this"," ",a.publishedAs===f.O2.Template?"Template":"Repl","."]}),(0,l.BX)(o.G7,{css:o.l0.colWithGap(8),children:[(0,l.tZ)("label",{css:o.l0.color.foregroundDimmer,htmlFor:p,children:"Title"}),(0,l.tZ)(o.II,{id:p,onChange:function(e){k.setValue(e.target.value)},disabled:_.loading,placeholder:"Give your post a title"}),k.error?(0,l.tZ)(o.E_,{icon:(0,l.tZ)(g.Z,{}),text:null===(n=k.error)||void 0===n?void 0:n.message,colorway:"negative"}):null]}),(0,l.BX)(o.G7,{css:o.l0.colWithGap(8),children:[(0,l.tZ)("label",{css:o.l0.color.foregroundDimmer,htmlFor:h,children:"Description"}),(0,l.tZ)(o.B,{id:h,onChange:function(e){B.setValue(e.target.value)},css:[o.l0.width("100%"),{minHeight:o.TV.space128,maxHeight:o.TV.space256,resize:"vertical",lineHeight:o.TV.lineHeightDefault}],disabled:_.loading,placeholder:"Write something about this post"}),B.error?(0,l.tZ)(o.E_,{icon:(0,l.tZ)(g.Z,{}),text:null===(t=B.error)||void 0===t?void 0:t.message,colorway:"negative"}):null]}),(0,l.tZ)(v,{}),_.error?(0,l.tZ)(o.E_,{icon:(0,l.tZ)(g.Z,{}),colorway:"negative",text:_.error}):null,(0,l.tZ)(o.zx,{text:_.loading?"Sharing update...":"Share update",type:"submit",colorway:"primary",disabled:Boolean(_.loading||k.error||B.error),css:{alignSelf:"end"},iconLeft:(0,l.tZ)(b.Z,{})})]})}},19244:function(e,n,t){t.d(n,{O:function(){return f}});var r=t(47568),i=t(10253),l=t(70655),a=t(26042),o=t(7297),c=t(31230),u=t(15764),s=t(50319);function d(){var e=(0,o.Z)(["\n  mutation PublishReplCreatePost($input: CreateReplPost2Input!) {\n    createReplPost2(input: $input) {\n      ... on Post {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},h=(0,c.Ps)(d(),u.FW);function v(e){var n,t,r,i,l,a,o;return e.error?e.error.message||"Something went wrong publishing your Repl":"NotFoundError"===(null===(n=e.data)||void 0===n||null===(t=n.createReplPost2)||void 0===t?void 0:t.__typename)||"UnauthorizedError"===(null===(r=e.data)||void 0===r||null===(i=r.createReplPost2)||void 0===i?void 0:i.__typename)||"UserError"===(null===(l=e.data)||void 0===l||null===(a=l.createReplPost2)||void 0===a?void 0:a.__typename)?e.data.createReplPost2.message:(null===(o=e.data)||void 0===o?void 0:o.createReplPost2)&&"Post"!==e.data.createReplPost2.__typename?"Something went wrong publishing your Repl":void 0}function f(){var e=(0,i.Z)(function(e){var n=(0,a.Z)({},p,e);return s.D(h,n)}(),2),n=e[0],t=e[1],o=function(){var e=(0,r.Z)((function(e){var r,i;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:if(r=e.input,t.loading)return[2,{data:null,error:null}];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n({variables:{input:r}})];case 2:return[2,{data:(i=l.sent()).data,error:v(i)}];case 3:return l.sent(),[2,{data:null,error:"Something went wrong publishing your Repl"}];case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}();return{publish:o,data:t.data,loading:t.loading,error:v(t)}}},49483:function(e,n,t){t.d(n,{W:function(){return v},Z:function(){return f}});var r=t(35944),i=t(67294),l=t(53427),a=t(64080),o=t(77365),c=t(60459),u=t(69346),s=t(93160),d=t(49619),p=t(81255),h=t(62722);function v(e){var n=(0,i.useState)(null),t=n[0],r=n[1],l=(0,i.useState)(null),a=l[0],o=l[1],u=(0,c.Z)({onUpload:function(n){var t=n.url;r(null),e(t)},onUploadPreview:function(e){var n=e.dataUrl;o(null),r(n)},onError:function(e){r(null),o(e.message)}}),s=(0,i.useCallback)((function(){return o(null)}),[]);return{uploadImage:u.uploadImage,error:a,clearError:s,previewUrl:t}}function f(e){var n=(0,i.useRef)(null),t=e.size||48;return(0,r.BX)(u.Z,{css:[p.l0.position.relative,{cursor:"pointer","&:hover .surface":{opacity:.8},"&:hover .icon":{opacity:1}}],onClick:function(){var e;null===(e=n.current)||void 0===e||e.click()},"aria-label":e.value?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[e.value?(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.ZP,{iconUrl:e.value,size:e.size,alt:"icon"}),(0,r.tZ)(s.Z,{className:"surface",elevated:!0,css:[p.l0.borderRadius(8),p.l0.coverContainer,{opacity:e.isUploading?.8:0}]}),(0,r.tZ)(u.Z,{className:"icon",css:[p.l0.coverContainer,p.l0.center,p.l0.color.accentPrimaryDefault,{overflow:"hidden",opacity:e.isUploading?1:0}],children:e.isUploading?(0,r.tZ)(o.Z,{}):(0,r.tZ)(a.Z,{})})]}):(0,r.tZ)(u.Z,{css:[p.l0.center,p.l0.width(t),p.l0.height(t),p.l0.borderRadius(8),p.l0.color.foregroundDimmer,{border:"1px dashed "+p.TV.outlineDefault,"&:hover":{color:p.TV.accentPrimaryDefault,borderColor:p.TV.accentPrimaryDefault}}],children:(0,r.tZ)(d.Z,{})}),(0,r.tZ)("input",{css:[[p.l0.coverContainer,{opacity:0,zIndex:-1}]],ref:n,accept:h.W9.join(","),type:"file",onChange:function(n){var t=n.target,r=t.validity,i=t.files;if(r.valid){var l=i?i[0]:null;l&&e.onUpload(l)}}})]})}},58086:function(e,n,t){t.d(n,{p:function(){return r}});var r=1e3}}]);
//# sourceMappingURL=1822-db8adab7a668c413.js.map